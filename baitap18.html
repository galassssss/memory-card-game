<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BÃ i táº­p 18 - Memory Card Flip Game</title>

<style>

/* ===== RESET ===== */
body{
    font-family: Arial, sans-serif;
    margin:0;
    background:#f4f6f8;
    text-align:center;
}

header{
    padding:15px;
    background:#222;
    color:white;
}

/* ===== GRID LAYOUT ===== */

.game-board{
    display:grid;
    grid-template-columns: repeat(4,1fr);
    gap:15px;
    max-width:600px;
    margin:30px auto;
    padding:10px;
}

/* Mobile responsive */
@media(max-width:600px){
    .game-board{
        grid-template-columns: repeat(2,1fr);
    }
}

/* ===== CARD STYLE ===== */

.card{
    perspective:1000px;
    height:120px;
    cursor:pointer;
}

.card-inner{
    position:relative;
    width:100%;
    height:100%;
    transform-style:preserve-3d;
    transition:transform 0.6s;
}

.card.flip .card-inner{
    transform:rotateY(180deg);
}

.card-front,
.card-back{
    position:absolute;
    width:100%;
    height:100%;
    border-radius:10px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:30px;
    backface-visibility:hidden;
}

.card-front{
    background:#3498db;
    color:white;
}

.card-back{
    background:white;
    border:2px solid #ddd;
    transform:rotateY(180deg);
}

.card:hover{
    transform:scale(1.05);
}

button{
    padding:10px 20px;
    border:none;
    background:#27ae60;
    color:white;
    border-radius:5px;
    cursor:pointer;
}

</style>
</head>

<body>

<header>
<h2>Memory Card Flip Game</h2>
<p>Sá»‘ lÆ°á»£t: <span id="moves">0</span></p>
<button onclick="resetGame()">Reset Game</button>
</header>

<main>

<section class="game-board" id="board"></section>

</main>

<script>

/* ===== DATA ===== */

const symbols = ["ðŸŽ","ðŸŒ","ðŸ‡","ðŸ‰"];

let cards = [];
let firstCard = null;
let secondCard = null;
let lockBoard = false;
let moves = 0;

/* ===== SHUFFLE ===== */

function shuffle(array){
    return array.sort(()=>Math.random()-0.5);
}

/* ===== CREATE BOARD ===== */

function createBoard(){

    const board = document.getElementById("board");
    board.innerHTML="";

    cards = shuffle([...symbols,...symbols]);

    cards.forEach(symbol=>{

        const card = document.createElement("div");
        card.className="card";

        card.innerHTML=`
            <div class="card-inner">
                <div class="card-front">?</div>
                <div class="card-back">${symbol}</div>
            </div>
        `;

        card.dataset.symbol = symbol;

        card.addEventListener("click", flipCard);

        board.appendChild(card);
    });

}

/* ===== FLIP LOGIC ===== */

function flipCard(){

    if(lockBoard) return;
    if(this === firstCard) return;

    this.classList.add("flip");

    if(!firstCard){
        firstCard = this;
        return;
    }

    secondCard = this;
    moves++;
    document.getElementById("moves").innerText = moves;

    checkMatch();
}

/* ===== CHECK MATCH ===== */

function checkMatch(){

    let match = firstCard.dataset.symbol === secondCard.dataset.symbol;

    match ? disableCards() : unflipCards();
}

function disableCards(){

    firstCard.removeEventListener("click", flipCard);
    secondCard.removeEventListener("click", flipCard);

    resetTurn();

    checkWin();
}

function unflipCards(){

    lockBoard=true;

    setTimeout(()=>{

        firstCard.classList.remove("flip");
        secondCard.classList.remove("flip");

        resetTurn();

    },800);
}

function resetTurn(){

    [firstCard,secondCard] = [null,null];
    lockBoard=false;
}

/* ===== CHECK WIN ===== */

function checkWin(){

    const flipped = document.querySelectorAll(".card.flip");

    if(flipped.length === cards.length){

        setTimeout(()=>{
            alert("ðŸŽ‰ Báº¡n Ä‘Ã£ tháº¯ng!");
        },300);

    }
}

/* ===== RESET GAME ===== */

function resetGame(){

    moves=0;
    document.getElementById("moves").innerText=0;
    createBoard();
}

/* ===== INIT ===== */

createBoard();

</script>

</body>
</html>

